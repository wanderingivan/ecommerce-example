function getInputHtml(e){return'<textarea name="product.details['+e+']" id="detailInput" class="form-control" placeholder="Add more details"></textarea>'}function getTasksHtml(e){return"<li><div id='task"+e.id+"' class='media' style='display:none'><div class='media-body'><p class='media-heading'>"+e.assigner+"</p><p class='text-muted'>"+e.description+"</p><p class='text-muted'>"+e.created+"</p></div></div></li></li><li class='divider'></li>"}function getMessageHtml(e){return"<li><div id='message"+e.id+"' class='media' style='display:none'><div class='media-left'><img src='data:image/jpeg;base64,"+e.sender.imagePath+"'></img></div><div class='media-body'><p class='media-heading'>"+e.sender.username+"</p><p class='text-muted'>"+e.message+"</p><p class='text-muted'>"+e.sent+"</p></div></div></li></li><li class='divider'></li>"}function getProductHtml(e){return"<li><div id='product"+e.id+"' class='media' style='display:none'><div class='media-left'><img src='data:image/jpeg;base64,"+e.imagePath+"'></img></div><div class='media-body'><p class='media-heading'>"+e.productName+"</p><p class='text-muted'>$"+e.price+"</p><p class='text-muted'>Qty:"+e.quantity+"</p></div></div></li><li class='divider'></li>"}function populateCart(e){var t=$("#cartDropdown");0===$("#cartDropdown li").length&&$.getJSON(window.location.origin+"/Ecommerce/cart/cart",function(e){t.empty(),null==e.items?(t.html("<li class='divider'></li>"),t.append("<p style='margin-left:15px;color:#22a17d;'>Your cart is empty</p>")):($.each(e.items,function(e,a){console.log(a),t.append(getProductHtml(a)),$("#product"+a.id).toggle("slide",{direction:"right"},750),$("#product"+a.id).effect("highlight",{color:"rgba(34, 209, 163, 0.5)"},1e3)}),t.append("<li class='text-center'>Total: <span style='color:#22a17a'>"+e.total+"</li>")),t.append("<li class='divider'></li><li class='text-center'><a class='btn-alt' href='/Ecommerce/order/checkout'>Checkout</a></li>")})}function populateUnreadMessages(){var e=$("#messagesDropdown");0===$("#messagesDropdown li").length&&$.getJSON("/Ecommerce/message/unread-messages",function(t){e.empty(),console.log("JD"),console.log(t),0==t.messages.length?(e.html("<li class='divider'></li>"),e.append("<p style='margin-left:15px;color:#22a17d;'>You have no unread messages</p>")):$.each(t.messages,function(t,a){e.append(getMessageHtml(a)),$("#message"+a.id).toggle("slide",{direction:"right"},750),$("#message"+a.id).effect("highlight",{color:"rgba(34, 209, 163, 0.5)"},1e3)}),e.append("<li class='divider'></li><li class='text-center'><a class='btn-alt' href='/Ecommerce/message/user-messages'>Your Messages</a></li>")})}function populatePendingTasks(){var e=$("#dropdownTasks");0===$("#dropdownTasks li").length&&$.getJSON("/Ecommerce/admin/pendingTasks",function(t){e.empty(),0==t.tasks.length?(e.html("<li class='divider'></li>"),e.append("<p style='margin-left:15px;color:#22a17d;'>You have no pending tasks</p>")):$.each(t.tasks,function(t,a){e.append(getTasksHtml(a)),$("#task"+a.id).toggle("slide",{direction:"right"},750),$("#task"+a.id).effect("highlight",{color:"rgba(34, 209, 163, 0.5)"},1e3)})})}function createInput(e){var t=$("#detailsGroup #detailInput").length;$("#detailsGroup").append(getInputHtml(t))}function setUpForm(){$("#addDetail").click(function(){createInput(parent)})}$.ajaxPrefilter(function(e,t,a){var s;return!e.crossDomain&&(s=$('meta[name="_csrf"]').attr("content"))?a.setRequestHeader("X-CSRF-Token",s):void 0}),$(document).ready(function(){$.subscribe("addUnreadCount",function(e,t){var a=JSON.parse(e.originalEvent.data);$("#unread").html(a.unread+" Unread")}),$.subscribe("addTasksCount",function(e,t){var a=JSON.parse(e.originalEvent.data);$("#tasks").html(a.message)}),$.subscribe("loadLog",function(e,t){var a=e.originalEvent.request.responseText;$("#log").html(a)}),$("#dropdownMenuCart").click(populateCart),$("#dropdownMenuMessages").click(populateUnreadMessages),$("#dropdownMenuTasks").click(populatePendingTasks),$("#addDetail").click(function(){createInput(parent)}),$("#msgButton").click(function(){$("#msgButton").toggle(200),$("#msgForm").toggle(300)}),$(".rating input:radio").attr("checked",!1),$(".rating input:radio").click(function(){console.log("radio clicked"),$(".rating span").removeClass("checked"),$(this).parent().addClass("checked")}),$(".fa").click(function(){$(this).closest(".panel").find(".panel-body").slideToggle(700)})});